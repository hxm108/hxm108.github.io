(function(t){function e(e){for(var n,i,l=e[0],c=e[1],s=e[2],d=0,f=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),r=a.n(n);r.a},"06dc":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"f",(function(){return s})),a.d(e,"e",(function(){return u})),a.d(e,"g",(function(){return d})),a.d(e,"b",(function(){return f}));const n=[102,76,97,67],r=[73,68,51],o=[79,103,103,83],i=[102,116,121,112],l={mp3:"audio/mpeg",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg"};async function c(t){return await new Promise(e=>{const a=new FileReader;a.onload=t=>{e(t.target.result)},a.readAsArrayBuffer(t)})}function s(t,e,a){let n="",r="",o=a.split("-");return o.length>1?(n=o[0].trim(),r=o[1].trim()):1===o.length&&(r=o[0].trim()),"string"==typeof t&&""!==t&&(n=t),"string"==typeof e&&""!==e&&(r=e),{artist:n,title:r}}function u(t){let e="";if(void 0!==t.common.picture&&t.common.picture.length>0){let a=new Blob([t.common.picture[0].data],{type:t.common.picture[0].format});e=URL.createObjectURL(a)}return e}function d(t,e){return t.every((t,a)=>t===e[a])}function f(t,e){return d(r,t.slice(0,r.length))?"mp3":d(n,t.slice(0,n.length))?"flac":d(o,t.slice(0,o.length))?"ogg":d(i,t.slice(4,8))?"m4a":e}},1:function(t,e){},"1f0f":function(t,e,a){},2:function(t,e){},"28c0":function(t,e,a){"use strict";var n=a("1f0f"),r=a.n(n);r.a},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{id:"app"}},[a("el-main",[a("x-upload",{on:{handle_finish:t.showSuccess,handle_error:t.showFail}}),a("el-row",{attrs:{id:"app-control"}},[a("el-row",{staticStyle:{"padding-bottom":"1em","font-size":"14px"}},[t._v(" 歌曲命名格式： "),a("el-radio",{attrs:{label:"1",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("歌手-歌曲名")]),a("el-radio",{attrs:{label:"2",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("歌曲名")]),a("el-radio",{attrs:{label:"3",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("歌曲名-歌手")]),a("el-radio",{attrs:{label:"4",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("同原文件名")])],1),a("el-row",[a("el-button",{attrs:{icon:"el-icon-download",plain:""},on:{click:t.handleDownloadAll}},[t._v("下载全部")]),a("el-button",{attrs:{icon:"el-icon-delete",plain:"",type:"danger"},on:{click:t.handleDeleteAll}},[t._v("删除全部")]),a("el-checkbox",{staticStyle:{"margin-left":"1em"},attrs:{border:""},model:{value:t.instant_download,callback:function(e){t.instant_download=e},expression:"instant_download"}},[t._v("立即保存")])],1)],1),a("audio",{attrs:{autoplay:t.playing_auto,src:t.playing_url,controls:""}}),a("x-preview",{attrs:{"table-data":t.tableData,download_format:t.download_format},on:{music_changed:t.changePlaying}})],1),a("el-footer",{attrs:{id:"app-footer"}},[a("el-row",[t._v(" 音乐解锁：移除已购音乐的加密保护。 ")]),a("el-row",[a("span",[t._v("Copyright © 2020")]),t._v(" "),a("a",{attrs:{href:"https://github.com/ix64/unlock-music",target:"_blank"}},[t._v("开放源代码")])]),a("el-row",[t._v(" 当前版本：1.3.2.1(beta) "),a("a",{attrs:{href:"https://github.com/ix64/unlock-music/wiki/%E4%BD%BF%E7%94%A8%E6%8F%90%E7%A4%BA",target:"_blank"}},[t._v("使用帮助")])]),a("el-row",[t._v(" 语言 Language：中文 ")])],1)],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{attrs:{"auto-upload":!1,"on-change":t.handleFile,"show-file-list":!1,action:"",drag:"",multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击选择")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("本工具仅在浏览器内对文件进行解锁，无需消耗数据流量")])])},l=[],c={name:"upload",data(){return{cacheQueue:[],workers:[],idle_workers:[],thread_num:1}},mounted(){if(""!==document.location.host){this.thread_num=navigator.hardwareConcurrency||1;const t=a("bfa2");this.workers.push(t().CommonDecrypt),this.idle_workers.push(0),setTimeout(()=>{for(let e=1;e<this.thread_num;e++)this.workers.push(t().CommonDecrypt),this.idle_workers.push(e)},1e3)}else{const t=a("bd2e");this.workers.push(t.CommonDecrypt),this.idle_workers.push(0)}},methods:{handleFile(t){this.idle_workers.length>0?this.handleDoFile(t,this.idle_workers.shift()):this.cacheQueue.push(t)},handleCacheQueue(t){0!==this.cacheQueue.length?this.handleDoFile(this.cacheQueue.shift(),t):this.idle_workers.push(t)},handleDoFile(t,e){this.workers[e](t).then(t=>{this.$emit("handle_finish",t),this.handleCacheQueue(e)}).catch(a=>{this.$emit("handle_error",a,t.name),this.handleCacheQueue(e)})}}},s=c,u=(a("28c0"),a("2877")),d=Object(u["a"])(s,i,l,!1,null,"f6b8b5a0",null),f=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.picture}},[a("div",{staticClass:"image-slot el-image__error",attrs:{slot:"error"},slot:"error"},[t._v(" 暂无封面 ")])])]}}])}),a("el-table-column",{attrs:{label:"歌曲"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.title))])]}}])}),a("el-table-column",{attrs:{label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.artist))])]}}])}),a("el-table-column",{attrs:{label:"专辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.album))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{circle:"",icon:"el-icon-video-play",type:"success"},on:{click:function(a){return t.handlePlay(e.$index,e.row)}}}),a("el-button",{attrs:{circle:"",icon:"el-icon-download"},on:{click:function(a){return t.handleDownload(e.row)}}}),a("el-button",{attrs:{circle:"",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}})]}}])})],1)},h=[];function p(t,e){const a=document.createElement("a");switch(a.href=t.file,e){default:case"1":a.download=t.artist+" - "+t.title+"."+t.ext;break;case"2":a.download=t.title+"."+t.ext;break;case"3":a.download=t.title+" - "+t.artist+"."+t.ext;break;case"4":a.download=t.rawFilename+"."+t.ext;break}document.body.append(a),a.click(),a.remove()}function w(t){URL.revokeObjectURL(t.file),URL.revokeObjectURL(t.picture)}var b={name:"preview",props:{tableData:{type:Array,required:!0},download_format:{type:String,required:!0}},methods:{handlePlay(t,e){this.$emit("music_changed",e.file)},handleDelete(t,e){w(e),this.tableData.splice(t,1)},handleDownload(t){p(t,this.download_format)}}},g=b,y=Object(u["a"])(g,m,h,!1,null,"6856848d",null),_=y.exports,v={name:"app",components:{xUpload:f,xPreview:_},data(){return{activeIndex:"1",tableData:[],playing_url:"",playing_auto:!1,download_format:"1",instant_download:!1}},created(){this.$nextTick((function(){this.finishLoad()}))},methods:{finishLoad(){const t=document.getElementById("loader-mask");t&&t.remove(),this.$notify.info({title:"欢迎使用",message:"最近更新内容：</br>1. 优化UI</br>2. 添加保存文件名选项",dangerouslyUseHTMLString:!0,duration:1e4,position:"top-left"})},showSuccess(t){if(t.status){this.instant_download?(p(t,this.download_format),w(t)):(this.tableData.push(t),this.$notify.success({title:"成功",message:t.title,duration:3e3}));{let e=[t.title,t.artist,t.album];window._paq.push(["trackEvent","Unlock",t.rawExt+","+t.mime,JSON.stringify(e)])}}else this.showFail(t.message,t.rawFilename+"."+t.rawExt)},showFail(t,e){this.$notify.error({title:"失败",message:t+"，"+e,dangerouslyUseHTMLString:!0,duration:6e3}),window._paq.push(["trackEvent","Error",t,e]),console.error(t,e)},changePlaying(t){this.playing_url=t,this.playing_auto=!0},handleDeleteAll(){this.tableData.forEach(t=>{w(t)}),this.tableData=[]},handleDownloadAll(){let t=0,e=setInterval(()=>{t<this.tableData.length?(p(this.tableData[t],this.download_format),t++):clearInterval(e)},300)}}},k=v,x=(a("034f"),Object(u["a"])(k,r,o,!1,null,null,null)),O=x.exports,D=a("9483");Object(D["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available."),window.location.reload()},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var j=a("5c96");a("0fae");n["default"].use(j["Link"]),n["default"].use(j["Image"]),n["default"].use(j["Button"]),n["default"].use(j["Table"]),n["default"].use(j["TableColumn"]),n["default"].use(j["Main"]),n["default"].use(j["Footer"]),n["default"].use(j["Container"]),n["default"].use(j["Icon"]),n["default"].use(j["Row"]),n["default"].use(j["Col"]),n["default"].use(j["Upload"]),n["default"].use(j["Checkbox"]),n["default"].use(j["Radio"]),n["default"].prototype.$notify=j["Notification"],n["default"].config.productionTip=!1,new n["default"]({render:t=>t(O)}).$mount("#app")},"85ec":function(t,e,a){},a8ee:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return i}));var n=a("fd2f"),r=a("06dc");const o=[0,0,0,32,102,116,121,112];async function i(t,e){const a=await Object(r["d"])(t),i=new Uint8Array(a);for(let n=0;n<8;++n)i[n]=o[n];const l=new Blob([i],{type:"audio/mp4"});return await Object(n["Decrypt"])(l,e,"m4a",!1)}},b6cf:function(t,e,a){"use strict";a.r(e);var n=a("06dc");const r=[79,103,103,83,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,30,1,118,111,114,98,105,115,0,0,0,0,2,68,172,0,0,0,0,0,0,0,238,2,0,0,0,0,0,184,1,79,103,103,83,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,16,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,118,111,114,98,105,115,44,0,0,0,88,105,112,104,46,79,114,103,32,108,105,98,86,111,114,98,105,115,32,73,32,50,48,49,53,48,49,48,53,32,40,226,155,132,226,155,132,226,155,132,226,155,132,41,0,0,0,0,0,0,0,0,84,73,84,76,69,61],o=[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,3,3,3,6,6,6,6,3,3,3,3,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,6,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,1,9,9,0,1,9,9,9,9,9,9,9,9],i=[74,214,202,144,103,247,82,94,149,35,159,19,17,126,71,116,61,144,170,63,81,198,9,213,159,250,102,249,243,214,161,144,160,247,240,29,149,222,159,132,17,244,14,116,187,144,188,63,146,0,9,91,159,98,102,161],l=195,c=216;class s{constructor(t,e,a){void 0===e||void 0===a?(this.Matrix128=t,this.generateMask58from128()):(this.Matrix58=t,this.Super58A=e,this.Super58B=a,this.generateMask128from58())}generateMask128from58(){if(56!==this.Matrix58.length)throw"incorrect mask58 matrix length";let t=[];for(let e=0;e<8;e+=1)t=t.concat([this.Super58A],this.Matrix58.slice(7*e,7*e+7),[this.Super58B],this.Matrix58.slice(49-7*e,56-7*e).reverse());this.Matrix128=t}generateMask58from128(){if(128!==this.Matrix128.length)throw"incorrect mask128 length";const t=this.Matrix128[0],e=this.Matrix128[8];let a=[];for(let r=0;r<8;r+=1){let o=16*r,i=120-o;if(this.Matrix128[o]!==t||this.Matrix128[o+8]!==e)throw"decode mask-128 to mask-58 failed";let l=this.Matrix128.slice(o+1,o+8),c=this.Matrix128.slice(i+1,i+8).reverse();if(!Object(n["g"])(l,c))throw"decode mask-128 to mask-58 failed";a=a.concat(l)}this.Matrix58=a,this.Super58A=t,this.Super58B=e}Decrypt(t){let e=t.slice(0),a=-1,n=-1;for(let r=0;r<t.length;r++)a++,n++,(32768===a||a>32768&&(a+1)%32768===0)&&(a++,n++),n>=128&&(n-=128),e[r]^=this.Matrix128[n];return e}}function u(){return new s(i,l,c)}function d(t){let e,a=Math.min(32768,t.length);for(let o=0;o<a;o+=128)try{if(e=new s(t.slice(o,o+128)),Object(n["g"])(n["c"],e.Decrypt(t.slice(0,n["c"].length))))break}catch(r){}return e}function f(t){if(t.length<r.length)return;let e={};for(let r=0;r<58;r++)e[r]={};for(let c=0;c<r.length;c++){if(0===o[c])continue;let a=p(c),n=t[c]^r[c],i=o[c];n in e[a]?e[a][n]+=i:e[a][n]=i}let a,n,i=[];try{for(let t=0;t<56;t++)i[t]=h(e[t]);a=h(e[56]),n=h(e[57])}catch(l){return}return new s(i,a,n)}function m(t,e,a){return new s(t,e,a)}function h(t){if(0===t.length)throw"can not match at least one key";let e,a=0;for(let n in t)t[n]>a&&(e=n,a=t[n]);return parseInt(e)}function p(t){t>127&&(t%=128);let e=t%16,a=(t-e)/16;switch(e){case 0:a=8,e=0;break;case 8:a=8,e=1;break;default:e>7?(a=7-a,e=15-e):e-=1;break}return 7*a+e}a.d(e,"Decrypt",(function(){return g}));const w=a("cb96"),b={mgg:{handler:f,ext:"ogg",detect:!0},mflac:{handler:d,ext:"flac",detect:!0},qmc0:{handler:u,ext:"mp3",detect:!1},qmc3:{handler:u,ext:"mp3",detect:!1},qmcogg:{handler:u,ext:"ogg",detect:!1},qmcflac:{handler:u,ext:"flac",detect:!1},bkcmp3:{handler:u,ext:"mp3",detect:!1},bkcflac:{handler:u,ext:"flac",detect:!1},tkm:{handler:u,ext:"m4a",detect:!1}};async function g(t,e,a){if(!(a in b))return{status:!1,message:"File type is incorrect!"};const r=b[a],o=new Uint8Array(await Object(n["d"])(t));let i,l,c;if(r.detect){if(i=o.slice(0,-368),l=r.handler(i),c=o.slice(-368),void 0===l&&(l=await _(c,e,a)),void 0===l)return{status:!1,message:a+"格式仅提供实验性支持！"}}else i=o,l=r.handler(i);const s=l.Decrypt(i),u=Object(n["b"])(s,r.ext),d=n["a"][u],f=new Blob([s],{type:d}),m=await w.parseBlob(f),h=Object(n["f"])(m.common.artist,m.common.title,e);return r.detect&&y(c,l.Matrix128,h.artist,h.title,m.common.album,e,a),{status:!0,title:h.title,artist:h.artist,ext:u,album:m.common.album,picture:Object(n["e"])(m),file:URL.createObjectURL(f),mime:d}}function y(t,e,a,n,r,o,i){fetch("https://stats.ixarea.com/collect/qmcmask/usage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Mask:Array.from(e),Key:Array.from(t),Artist:a,Title:n,Album:r,Filename:o,Format:i})}).then().catch()}async function _(t,e,a){try{const n=await fetch("https://stats.ixarea.com/collect/qmcmask/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Format:a,Key:Array.from(t),Filename:e})});let r=await n.json();return m(r.Matrix58,r.Super58A,r.Super58B)}catch(n){}}},bd2e:function(t,e,a){"use strict";a.r(e),a.d(e,"CommonDecrypt",(function(){return l}));const n=a("dde9"),r=a("b6cf"),o=a("fd2f"),i=a("a8ee");async function l(t){let e,a=t.name.substring(t.name.lastIndexOf(".")+1,t.name.length).toLowerCase(),l=t.name.substring(0,t.name.lastIndexOf("."));switch(a){case"ncm":e=await n.Decrypt(t.raw);break;case"mp3":case"flac":case"m4a":case"ogg":e=await o.Decrypt(t.raw,l,a);break;case"tm0":case"tm3":e=await o.Decrypt(t.raw,l,"mp3");break;case"qmc3":case"qmc0":case"qmcflac":case"qmcogg":case"tkm":case"bkcmp3":case"bkcflac":case"mflac":case"mgg":e=await r.Decrypt(t.raw,l,a);break;case"tm2":case"tm6":e=await i.Decrypt(t.raw,l);break;default:e={status:!1,message:"不支持此文件格式"}}return e.rawExt=a,e.rawFilename=l,e}},bfa2:function(t,e,a){var n=a("3d67"),r=["CommonDecrypt"];t.exports=function(){var t=new Worker(a.p+"1befbc306449e714fda8.worker.js",{name:"[hash].worker.js"});return n(t,r),t}},dde9:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return c}));var n=a("06dc");const r=a("3452"),o=a("7907"),i=r.enc.Hex.parse("687a4852416d736f356b496e62617857"),l=r.enc.Hex.parse("2331346C6A6B5F215C5D2630553C2728");async function c(t){const e=await Object(n["d"])(t),a=new DataView(e);if(1313166403!==a.getUint32(0,!0)||1296122950!==a.getUint32(4,!0))return{status:!1,message:"此ncm文件已损坏"};const r=u(a,e,10),o=d(r.data),i=f(a,e,r.offset),l=i.data;let c=i.offset+a.getUint32(i.offset+5,!0)+13,m=new Uint8Array(e,c);for(let n=0;n<m.length;++n)m[n]^=o[255&n];void 0===l.format&&(l.format=Object(n["b"])(m,"mp3"));const h=n["a"][l.format],p=[];l.artist.forEach(t=>p.push(t[0])),"mp3"===l.format&&(m=await s(m,p,l.musicName,l.album,l.albumPic));const w=new Blob([m],{type:h});return{status:!0,title:l.musicName,artist:p.join(" & "),ext:l.format,album:l.album,picture:l.albumPic,file:URL.createObjectURL(w),mime:h}}async function s(t,e,a,n,r){const i=new o(t);if(i.setFrame("TPE1",e).setFrame("TIT2",a).setFrame("TALB",n),""!==r)try{const t=await(await fetch(r)).arrayBuffer();i.setFrame("APIC",{type:3,data:t,description:"Cover"})}catch(l){console.log("Fail to write cover image!")}return i.addTag(),i.arrayBuffer}function u(t,e,a){const n=t.getUint32(a,!0);a+=4;const o=new Uint8Array(e,a,n).map(t=>100^t);a+=n;const l=r.AES.decrypt({ciphertext:r.lib.WordArray.create(o)},i,{mode:r.mode.ECB,padding:r.pad.Pkcs7}),c=new Uint8Array(l.sigBytes),s=l.words,u=l.sigBytes;for(let r=0;r<u;r++)c[r]=s[r>>>2]>>>24-r%4*8&255;return{offset:a,data:c.slice(17)}}function d(t){const e=new Uint8Array(Array(256).keys()),a=t.length;let n=0;for(let r=0;r<256;r++)n=e[r]+n+t[r%a]&255,[e[r],e[n]]=[e[n],e[r]];return e.map((t,e,a)=>{e=e+1&255;const n=a[e],r=a[e+n&255];return a[n+r&255]})}function f(t,e,a){const n=t.getUint32(a,!0);if(a+=4,0===n)return{};const o=new Uint8Array(e,a,n).map(t=>99^t);a+=n;const i=r.AES.decrypt({ciphertext:r.enc.Base64.parse(r.lib.WordArray.create(o.slice(22)).toString(r.enc.Utf8))},l,{mode:r.mode.ECB,padding:r.pad.Pkcs7}).toString(r.enc.Utf8),c=i.indexOf(":");let s=JSON.parse(i.slice(c+1));return"dj"===i.slice(0,c)&&(s=s.mainMusic),s.albumPic=s.albumPic.replace("http:","https:"),{data:s,offset:a}}},fd2f:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return o}));var n=a("06dc");const r=a("cb96");async function o(t,e,a,o=!0){let i=a;if(o){const e=new Uint8Array(await Object(n["d"])(t));i=Object(n["b"])(e,a),i!==a&&(t=new Blob([e],{type:n["a"][i]}))}const l=await r.parseBlob(t),c=Object(n["f"])(l.common.artist,l.common.title,e);return{status:!0,title:c.title,artist:c.artist,ext:i,album:l.common.album,picture:Object(n["e"])(l),file:URL.createObjectURL(t),mime:n["a"][i]}}}});
//# sourceMappingURL=app.f9b13c0d.js.map