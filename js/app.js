(function(e){function t(t){for(var r,c,o=t[0],s=t[1],u=t[2],d=0,f=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},i=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"06dc":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"b",(function(){return m}));n("a623"),n("fb6a"),n("d3b7"),n("ac1f"),n("3ca3"),n("1276"),n("498a"),n("ddb0"),n("2b3d"),n("96cf");var r=n("1da1"),a=[102,76,97,67],i=[73,68,51],c=[79,103,103,83],o=[102,116,121,112],s={mp3:"audio/mpeg",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg"};function u(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsArrayBuffer(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(e,t,n){var r="",a="",i=n.split("-");return i.length>1?(r=i[0].trim(),a=i[1].trim()):1===i.length&&(a=i[0].trim()),"string"==typeof e&&""!==e&&(r=e),"string"==typeof t&&""!==t&&(a=t),{artist:r,title:a}}function f(e){var t="";if(void 0!==e.common.picture&&e.common.picture.length>0){var n=new Blob([e.common.picture[0].data],{type:e.common.picture[0].format});t=URL.createObjectURL(n)}return t}function p(e,t){return e.every((function(e,n){return e===t[n]}))}function m(e,t){return p(i,e.slice(0,i.length))?"mp3":p(a,e.slice(0,a.length))?"flac":p(c,e.slice(0,c.length))?"ogg":p(o,e.slice(4,8))?"m4a":t}},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4fe6":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("46a1"),n("450d");var r=n("e5f2"),a=n.n(r),i=(n("10cb"),n("f3ad")),c=n.n(i),o=(n("06f1"),n("6ac9")),s=n.n(o),u=(n("b5d8"),n("f494")),l=n.n(u),d=(n("560b"),n("dcdc")),f=n.n(d),p=(n("f225"),n("89a9")),m=n.n(p),b=(n("f4f9"),n("c2cc")),h=n.n(b),g=(n("7a0f"),n("0f6c")),v=n.n(g),w=(n("aaa5"),n("a578")),y=n.n(w),x=(n("adec"),n("3d2d")),k=n.n(x),_=(n("bdc7"),n("aa2f")),O=n.n(_),j=(n("de31"),n("c69e")),S=n.n(j),D=(n("5466"),n("ecdf")),A=n.n(D),U=(n("38a0"),n("ad41")),M=n.n(U),R=(n("3c52"),n("0d7b")),C=n.n(R),F=(n("fe07"),n("6ac5")),P=n.n(F),B=(n("e960"),n("b35b")),L=n.n(B),E=(n("1951"),n("eedf")),T=n.n(E),q=(n("acb6"),n("c673")),$=n.n(q),I=(n("fd71"),n("a447")),z=n.n(I),N=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{id:"app"}},[n("el-main",[n("x-upload",{on:{handle_error:e.showFail,handle_finish:e.showSuccess}}),n("el-row",{attrs:{id:"app-control"}},[n("el-row",[n("el-input",{staticStyle:{width:"290px"},attrs:{placeholder:"URL",clearable:"","prefix-icon":"el-icon-link"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),n("el-button",{staticStyle:{"margin-left":"1em"},attrs:{circle:"",icon:"el-icon-caret-right",type:"primary",size:"mini"},on:{click:function(t){e.playing_url=e.input}}}),n("el-button",{staticStyle:{"margin-left":"0.5em"},attrs:{circle:"",icon:"el-icon-switch-button",type:"danger",size:"mini"},on:{click:function(t){e.playing_url=e.none,e.input=e.none}}})],1),n("el-row",{staticStyle:{"font-size":"12px",color:"gray","padding-bottom":"2em","padding-top":"0.8em"}},[e._v(" 播放URL地址 ")]),n("el-row",{staticStyle:{"padding-bottom":"1em","font-size":"13px"}},[n("el-radio-group",{attrs:{name:"format",size:"small"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[n("el-radio-button",{attrs:{label:"1"}},[e._v("原文件")]),n("el-radio-button",{attrs:{label:"4"}},[e._v("歌手 - 歌曲名")]),n("el-radio-button",{attrs:{label:"2"}},[e._v("歌曲名 - 歌手")]),n("el-radio-button",{attrs:{label:"3"}},[e._v("歌曲名")])],1)],1),n("el-row",[n("el-button",{attrs:{icon:"el-icon-download",plain:"",type:"success"},on:{click:e.handleDownloadAll}},[e._v("保存全部")]),n("el-popover",{attrs:{placement:"top",trigger:"hover",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("移除所有导入的文件吗？")]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.handleDeleteAll}},[e._v("确定")])],1),n("el-button",{staticStyle:{"margin-left":"1em"},attrs:{slot:"reference",icon:"el-icon-delete",plain:"",type:"danger"},slot:"reference"},[e._v("删除全部")])],1),n("el-checkbox",{staticStyle:{"margin-left":"1em"},attrs:{label:"立即保存",border:""},model:{value:e.instant_download,callback:function(t){e.instant_download=t},expression:"instant_download"}})],1)],1),n("audio",{attrs:{id:e.player,autoplay:e.playing_auto,src:e.playing_url,controls:""}}),n("x-preview",{attrs:{download_format:e.download_format,"table-data":e.tableData},on:{music_changed:e.changePlaying}})],1),n("el-footer",{attrs:{id:"app-footer"}},[n("el-row",{staticStyle:{"padding-bottom":"0.2em","font-size":"14px"}},[e._v(" 版本："),n("span",{domProps:{textContent:e._s(e.version)}})]),n("el-row",{staticStyle:{"padding-bottom":"1em"}},[n("span",[e._v("Copyright © 2019-2020")])]),n("el-row",[n("a",{attrs:{href:"https://github.com/unblockmusic/unblockmusic.github.io/issues/new",target:"_blank"}},[n("el-button",{attrs:{icon:"el-icon-chat-line-square",size:"mini",round:"",type:"primary"}},[e._v("意见反馈")])],1),e._v(" "),n("a",{attrs:{href:"https://github.com/ix64/unlock-music",target:"_blank"}},[n("el-button",{attrs:{icon:"el-icon-receiving",size:"mini",round:"",type:"warning"}},[e._v("开放源代码")])],1)])],1)],1)},Q=[],H=(n("4160"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-upload",{attrs:{"auto-upload":!1,"on-change":e.handleFile,"show-file-list":!1,action:"",drag:"",multiple:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击选择")])]),n("div",{staticClass:"el-upload__tip",staticStyle:{color:"gray"},attrs:{slot:"tip"},slot:"tip"},[e._v("播放音频文件")])])}),W=[],K=(n("b0c0"),{name:"upload",data:function(){return{cacheQueue:[],workers:[],idle_workers:[],thread_num:1}},mounted:function(){var e=this;if(""!==document.location.host){this.thread_num=navigator.hardwareConcurrency||1;var t=n("bfa2");this.workers.push(t().CommonDecrypt),this.idle_workers.push(0),setTimeout((function(){for(var n=1;n<e.thread_num;n++)e.workers.push(t().CommonDecrypt),e.idle_workers.push(n)}),1e3)}else{var r=n("bd2e");this.workers.push(r.CommonDecrypt),this.idle_workers.push(0)}},methods:{handleFile:function(e){this.idle_workers.length>0?this.handleDoFile(e,this.idle_workers.shift()):this.cacheQueue.push(e)},handleCacheQueue:function(e){0!==this.cacheQueue.length?this.handleDoFile(this.cacheQueue.shift(),e):this.idle_workers.push(e)},handleDoFile:function(e,t){var n=this;this.workers[t](e).then((function(e){n.$emit("handle_finish",e),n.handleCacheQueue(t)})).catch((function(r){n.$emit("handle_error",r,e.name),n.handleCacheQueue(t)}))}}}),V=K,G=(n("eb76"),n("2877")),X=Object(G["a"])(V,H,W,!1,null,"440d0dfa",null),Y=X.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.picture}},[n("div",{staticClass:"image-slot el-image__error",attrs:{slot:"error"},slot:"error"},[e._v(" 暂无封面 ")])])]}}])}),n("el-table-column",{attrs:{label:"歌曲"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.title))])]}}])}),n("el-table-column",{attrs:{label:"歌手"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.artist))])]}}])}),n("el-table-column",{attrs:{label:"专辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.album))])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{circle:"",icon:"el-icon-caret-right",type:"primary"},on:{click:function(n){return e.handlePlay(t.$index,t.row)}}}),n("el-button",{attrs:{circle:"",icon:"el-icon-download",type:"success"},on:{click:function(n){return e.handleDownload(t.row)}}}),n("el-button",{attrs:{circle:"",icon:"el-icon-close",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})]}}])})],1)},ee=[];n("a434"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");function te(e,t){var n=document.createElement("a");switch(n.href=e.file,t){default:case"4":n.download=e.artist+" - "+e.title+"."+e.ext;break;case"3":n.download=e.title+"."+e.ext;break;case"2":n.download=e.title+" - "+e.artist+"."+e.ext;break;case"1":n.download=e.rawFilename+"."+e.ext;break}document.body.append(n),n.click(),n.remove()}function ne(e){URL.revokeObjectURL(e.file),URL.revokeObjectURL(e.picture)}var re={name:"preview",props:{tableData:{type:Array,required:!0},download_format:{type:String,required:!0}},methods:{handlePlay:function(e,t){this.$emit("music_changed",t.file)},handleDelete:function(e,t){ne(t),this.tableData.splice(e,1)},handleDownload:function(e){te(e,this.download_format)}}},ae=re,ie=Object(G["a"])(ae,Z,ee,!1,null,"73a7bbf7",null),ce=ie.exports,oe=n("9224"),se={name:"app",components:{xUpload:Y,xPreview:ce},data:function(){return{version:oe.version,activeIndex:"1",tableData:[],playing_url:"",playing_auto:!0,download_format:"1",instant_download:!1,input:"",none:""}},created:function(){this.$nextTick((function(){this.finishLoad()}))},methods:{finishLoad:function(){var e=document.getElementById("loader-mask");e&&e.remove(),this.$notify.success({title:"欢迎使用",message:"最近更新内容：</br>"+oe.updateInfo,dangerouslyUseHTMLString:!0,duration:8e3,position:"top-left"})},showSuccess:function(e){if(e.status){this.instant_download?(te(e,this.download_format),ne(e)):(this.tableData.push(e),this.$notify.success({title:"成功",message:e.title,duration:3e3}));var t=[e.title,e.artist,e.album];window._paq.push(["trackEvent","Unlock",e.rawExt+","+e.mime,JSON.stringify(t)])}else this.showFail(e.message,e.rawFilename+"."+e.rawExt)},showFail:function(e,t){this.$notify.error({title:"失败",message:e+"，"+t,dangerouslyUseHTMLString:!0,duration:6e3}),window._paq.push(["trackEvent","Error",e,t]),console.error(e,t)},changePlaying:function(e){this.playing_url=e,this.playing_auto=!0},handleDeleteAll:function(){this.tableData.forEach((function(e){ne(e)})),this.tableData=[],this.playing_url=[]},handleDownloadAll:function(){var e=this,t=0,n=setInterval((function(){t<e.tableData.length?(te(e.tableData[t],e.download_format),t++):clearInterval(n)}),300)}}},ue=se,le=(n("034f"),Object(G["a"])(ue,J,Q,!1,null,null,null)),de=le.exports,fe=n("9483");Object(fe["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available."),window.location.reload()},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("0fae");N["default"].use(z.a),N["default"].use($.a),N["default"].use(T.a),N["default"].use(L.a),N["default"].use(P.a),N["default"].use(C.a),N["default"].use(M.a),N["default"].use(A.a),N["default"].use(S.a),N["default"].use(O.a),N["default"].use(k.a),N["default"].use(y.a),N["default"].use(v.a),N["default"].use(h.a),N["default"].use(m.a),N["default"].use(f.a),N["default"].use(l.a),N["default"].use(s.a),N["default"].use(c.a),N["default"].prototype.$notify=a.a,N["default"].config.productionTip=!1,new N["default"]({render:function(e){return e(de)}}).$mount("#app")},"85ec":function(e,t,n){},9224:function(e){e.exports=JSON.parse('{"name":"unlock-music","version":"1.3.3","updateInfo":"1.支持网易云音乐DJ类型ncm<br>2.优化旧浏览器的支持","license":"MIT","description":"Unlock encrypted music file in browser.","repository":{"type":"git","url":"https://github.com/ix64/unlock-music"},"private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","fix-compatibility":"node ./src/fix-compatibility.js"},"dependencies":{"browser-id3-writer":"^4.4.0","core-js":"^3.6.4","crypto-js":"^4.0.0","element-ui":"^2.13.0","music-metadata-browser":"^2.0.4","register-service-worker":"^1.6.2","vue":"^2.6.11"},"devDependencies":{"@vue/cli-plugin-babel":"^4.2.3","@vue/cli-plugin-pwa":"^4.2.3","@vue/cli-service":"^4.2.3","babel-plugin-component":"^1.1.1","vue-cli-plugin-element":"^1.0.1","vue-template-compiler":"^2.6.11","workerize-loader":"^1.1.0"}}')},a8ee:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return o}));n("ace4"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("96cf");var r=n("1da1"),a=n("fd2f"),i=n("06dc"),c=[0,0,0,32,102,116,121,112];function o(e,t){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,o,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["d"])(t);case 2:for(r=e.sent,o=new Uint8Array(r),s=0;s<8;++s)o[s]=c[s];return u=new Blob([o],{type:"audio/mp4"}),e.next=8,Object(a["Decrypt"])(u,n,"m4a",!1);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}},b6cf:function(e,t,n){"use strict";n.r(t);n("a630"),n("fb6a"),n("ace4"),n("d3b7"),n("3ca3"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),n("96cf");var r=n("1da1"),a=n("06dc"),i=(n("99af"),n("d4ec")),c=n("bee2"),o=[79,103,103,83,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,30,1,118,111,114,98,105,115,0,0,0,0,2,68,172,0,0,0,0,0,0,0,238,2,0,0,0,0,0,184,1,79,103,103,83,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,16,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,118,111,114,98,105,115,44,0,0,0,88,105,112,104,46,79,114,103,32,108,105,98,86,111,114,98,105,115,32,73,32,50,48,49,53,48,49,48,53,32,40,226,155,132,226,155,132,226,155,132,226,155,132,41,0,0,0,0,0,0,0,0,84,73,84,76,69,61],s=[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,3,3,3,6,6,6,6,3,3,3,3,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,6,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,1,9,9,0,1,9,9,9,9,9,9,9,9],u=[74,214,202,144,103,247,82,94,149,35,159,19,17,126,71,116,61,144,170,63,81,198,9,213,159,250,102,249,243,214,161,144,160,247,240,29,149,222,159,132,17,244,14,116,187,144,188,63,146,0,9,91,159,98,102,161],l=195,d=216,f=function(){function e(t,n,r){Object(i["a"])(this,e),void 0===n||void 0===r?(this.Matrix128=t,this.generateMask58from128()):(this.Matrix58=t,this.Super58A=n,this.Super58B=r,this.generateMask128from58())}return Object(c["a"])(e,[{key:"generateMask128from58",value:function(){if(56!==this.Matrix58.length)throw"incorrect mask58 matrix length";for(var e=[],t=0;t<8;t+=1)e=e.concat([this.Super58A],this.Matrix58.slice(7*t,7*t+7),[this.Super58B],this.Matrix58.slice(49-7*t,56-7*t).reverse());this.Matrix128=e}},{key:"generateMask58from128",value:function(){if(128!==this.Matrix128.length)throw"incorrect mask128 length";for(var e=this.Matrix128[0],t=this.Matrix128[8],n=[],r=0;r<8;r+=1){var i=16*r,c=120-i;if(this.Matrix128[i]!==e||this.Matrix128[i+8]!==t)throw"decode mask-128 to mask-58 failed";var o=this.Matrix128.slice(i+1,i+8),s=this.Matrix128.slice(c+1,c+8).reverse();if(!Object(a["g"])(o,s))throw"decode mask-128 to mask-58 failed";n=n.concat(o)}this.Matrix58=n,this.Super58A=e,this.Super58B=t}},{key:"Decrypt",value:function(e){for(var t=e.slice(0),n=-1,r=-1,a=0;a<e.length;a++)n++,r++,(32768===n||n>32768&&(n+1)%32768===0)&&(n++,r++),r>=128&&(r-=128),t[a]^=this.Matrix128[r];return t}}]),e}();function p(){return new f(u,l,d)}function m(e){for(var t,n=Math.min(32768,e.length),r=0;r<n;r+=128)try{if(t=new f(e.slice(r,r+128)),Object(a["g"])(a["c"],t.Decrypt(e.slice(0,a["c"].length))))break}catch(i){}return t}function b(e){if(!(e.length<o.length)){for(var t={},n=0;n<58;n++)t[n]={};for(var r=0;r<o.length;r++)if(0!==s[r]){var a=v(r),i=e[r]^o[r],c=s[r];i in t[a]?t[a][i]+=c:t[a][i]=c}var u,l,d=[];try{for(var p=0;p<56;p++)d[p]=g(t[p]);u=g(t[56]),l=g(t[57])}catch(m){return}return new f(d,u,l)}}function h(e,t,n){return new f(e,t,n)}function g(e){if(0===e.length)throw"can not match at least one key";var t,n=0;for(var r in e)e[r]>n&&(t=r,n=e[r]);return parseInt(t)}function v(e){e>127&&(e%=128);var t=e%16,n=(e-t)/16;switch(t){case 0:n=8,t=0;break;case 8:n=8,t=1;break;default:t>7?(n=7-n,t=15-t):t-=1;break}return 7*n+t}n.d(t,"Decrypt",(function(){return x}));var w=n("cb96"),y={mgg:{handler:b,ext:"ogg",detect:!0},mflac:{handler:m,ext:"flac",detect:!0},qmc0:{handler:p,ext:"mp3",detect:!1},qmc3:{handler:p,ext:"mp3",detect:!1},qmcogg:{handler:p,ext:"ogg",detect:!1},qmcflac:{handler:p,ext:"flac",detect:!1},bkcmp3:{handler:p,ext:"mp3",detect:!1},bkcflac:{handler:p,ext:"flac",detect:!1},tkm:{handler:p,ext:"m4a",detect:!1}};function x(e,t,n){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,c,o,s,u,l,d,f,p,m,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r in y){e.next=2;break}return e.abrupt("return",{status:!1,message:"File type is incorrect!"});case 2:return i=y[r],e.t0=Uint8Array,e.next=6,Object(a["d"])(t);case 6:if(e.t1=e.sent,c=new e.t0(e.t1),!i.detect){e.next=20;break}if(o=c.slice(0,-368),s=i.handler(o),u=c.slice(-368),void 0!==s){e.next=16;break}return e.next=15,O(u,n,r);case 15:s=e.sent;case 16:if(void 0!==s){e.next=18;break}return e.abrupt("return",{status:!1,message:r+"格式仅提供实验性支持！"});case 18:e.next=22;break;case 20:o=c,s=i.handler(o);case 22:return l=s.Decrypt(o),d=Object(a["b"])(l,i.ext),f=a["a"][d],p=new Blob([l],{type:f}),e.next=28,w.parseBlob(p);case 28:return m=e.sent,b=Object(a["f"])(m.common.artist,m.common.title,n),i.detect&&_(u,s.Matrix128,b.artist,b.title,m.common.album,n,r),e.abrupt("return",{status:!0,title:b.title,artist:b.artist,ext:d,album:m.common.album,picture:Object(a["e"])(m),file:URL.createObjectURL(p),mime:f});case 32:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function _(e,t,n,r,a,i,c){fetch("https://stats.ixarea.com/collect/qmcmask/usage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Mask:Array.from(t),Key:Array.from(e),Artist:n,Title:r,Album:a,Filename:i,Format:c})}).then().catch()}function O(e,t,n){return j.apply(this,arguments)}function j(){return j=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://stats.ixarea.com/collect/qmcmask/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Format:r,Key:Array.from(t),Filename:n})});case 3:return a=e.sent,e.next=6,a.json();case 6:return i=e.sent,e.abrupt("return",h(i.Matrix58,i.Super58A,i.Super58B));case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])}))),j.apply(this,arguments)}},bd2e:function(e,t,n){"use strict";n.r(t),n.d(t,"CommonDecrypt",(function(){return s}));n("baa5"),n("b0c0"),n("96cf");var r=n("1da1"),a=n("dde9"),i=n("b6cf"),c=n("fd2f"),o=n("a8ee");function s(e){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.name.substring(t.name.lastIndexOf(".")+1,t.name.length).toLowerCase(),r=t.name.substring(0,t.name.lastIndexOf(".")),e.t0=n,e.next="ncm"===e.t0?5:"mp3"===e.t0?9:"flac"===e.t0?9:"m4a"===e.t0?9:"ogg"===e.t0?9:"wav"===e.t0?9:"aac"===e.t0?9:"tm0"===e.t0?13:"tm3"===e.t0?13:"qmc3"===e.t0?17:"qmc0"===e.t0?17:"qmcflac"===e.t0?17:"qmcogg"===e.t0?17:"tkm"===e.t0?17:"bkcmp3"===e.t0?17:"bkcflac"===e.t0?17:"mflac"===e.t0?17:"mgg"===e.t0?17:"tm2"===e.t0?21:"tm6"===e.t0?21:25;break;case 5:return e.next=7,a.Decrypt(t.raw,r,n);case 7:return s=e.sent,e.abrupt("break",26);case 9:return e.next=11,c.Decrypt(t.raw,r,n);case 11:return s=e.sent,e.abrupt("break",26);case 13:return e.next=15,c.Decrypt(t.raw,r,"mp3");case 15:return s=e.sent,e.abrupt("break",26);case 17:return e.next=19,i.Decrypt(t.raw,r,n);case 19:return s=e.sent,e.abrupt("break",26);case 21:return e.next=23,o.Decrypt(t.raw,r);case 23:return s=e.sent,e.abrupt("break",26);case 25:s={status:!1,message:"不支持此文件格式"};case 26:return s.rawExt=n,s.rawFilename=r,e.abrupt("return",s);case 29:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}},bfa2:function(e,t,n){var r=n("3d67"),a=["CommonDecrypt"];e.exports=function(){var e=new Worker(n.p+"6c11211272bb2495ab6f.worker.js",{name:"[hash].worker.js"});return r(e,a),e}},dde9:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return u}));n("4160"),n("c975"),n("a15b"),n("d81d"),n("fb6a"),n("ace4"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("ddb0"),n("2b3d"),n("96cf");var r=n("1da1"),a=n("06dc"),i=n("3452"),c=n("7907"),o=i.enc.Hex.parse("687a4852416d736f356b496e62617857"),s=i.enc.Hex.parse("2331346C6A6B5F215C5D2630553C2728");function u(e,t,n){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,c,o,s,u,l,f,h,g,v,w,y,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["d"])(t);case 2:if(i=e.sent,c=new DataView(i),1313166403===c.getUint32(0,!0)&&1296122950===c.getUint32(4,!0)){e.next=6;break}return e.abrupt("return",{status:!1,message:"此ncm文件已损坏"});case 6:for(o=p(c,i,10),s=m(o.data),u=b(c,i,o.offset),l=u.data,f=u.offset+c.getUint32(u.offset+5,!0)+13,h=new Uint8Array(i,f),g=0;g<h.length;++g)h[g]^=s[255&g];if(void 0===l.album&&(l.album=""),v=[],l.artist&&l.artist.forEach((function(e){return v.push(e[0])})),w=Object(a["f"])(v.join(" & "),l.musicName,n),0===v.length&&v.push(w.artist),void 0===l.format&&(l.format=Object(a["b"])(h,"mp3")),"mp3"!==l.format){e.next=23;break}return e.next=22,d(h,v,w.title,l.album,l.albumPic);case 22:h=e.sent;case 23:return y=a["a"][l.format],x=new Blob([h],{type:y}),e.abrupt("return",{status:!0,title:w.title,artist:w.artist,ext:l.format,album:l.album,picture:l.albumPic,file:URL.createObjectURL(x),mime:y});case 26:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(e,t,n,r,a){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i){var o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=new c(t),o.setFrame("TPE1",n).setFrame("TIT2",r).setFrame("TALB",a),""===i){e.next=15;break}return e.prev=3,e.next=6,fetch(i);case 6:return e.next=8,e.sent.arrayBuffer();case 8:s=e.sent,o.setFrame("APIC",{type:3,data:s,description:"Cover"}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),console.log("Fail to write cover image!");case 15:return o.addTag(),e.abrupt("return",o.arrayBuffer);case 17:case"end":return e.stop()}}),e,null,[[3,12]])}))),f.apply(this,arguments)}function p(e,t,n){var r=e.getUint32(n,!0);n+=4;var a=new Uint8Array(t,n,r).map((function(e){return 100^e}));n+=r;for(var c=i.AES.decrypt({ciphertext:i.lib.WordArray.create(a)},o,{mode:i.mode.ECB,padding:i.pad.Pkcs7}),s=new Uint8Array(c.sigBytes),u=c.words,l=c.sigBytes,d=0;d<l;d++)s[d]=u[d>>>2]>>>24-d%4*8&255;return{offset:n,data:s.slice(17)}}function m(e){for(var t=new Uint8Array(Array(256).keys()),n=e.length,r=0,a=0;a<256;a++){r=t[a]+r+e[a%n]&255;var i=[t[r],t[a]];t[a]=i[0],t[r]=i[1]}return t.map((function(e,t,n){t=t+1&255;var r=n[t],a=n[t+r&255];return n[r+a&255]}))}function b(e,t,n){var r=e.getUint32(n,!0);if(n+=4,0===r)return{data:{},offset:n};var a=new Uint8Array(t,n,r).map((function(e){return 99^e}));n+=r;var c=i.AES.decrypt({ciphertext:i.enc.Base64.parse(i.lib.WordArray.create(a.slice(22)).toString(i.enc.Utf8))},s,{mode:i.mode.ECB,padding:i.pad.Pkcs7}).toString(i.enc.Utf8),o=c.indexOf(":"),u=JSON.parse(c.slice(o+1));return"dj"===c.slice(0,o)&&(u=u.mainMusic),u.albumPic=u.albumPic.replace("http:","https:"),{data:u,offset:n}}},eb76:function(e,t,n){"use strict";var r=n("4fe6"),a=n.n(r);a.a},fd2f:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return c}));n("ace4"),n("d3b7"),n("3ca3"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),n("96cf");var r=n("1da1"),a=n("06dc"),i=n("cb96");function c(e,t,n){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var c,o,s,u,l,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=!(d.length>3&&void 0!==d[3])||d[3],o=r,!c){e.next=10;break}return e.t0=Uint8Array,e.next=6,Object(a["d"])(t);case 6:e.t1=e.sent,s=new e.t0(e.t1),o=Object(a["b"])(s,r),o!==r&&(t=new Blob([s],{type:a["a"][o]}));case 10:return e.next=12,i.parseBlob(t);case 12:return u=e.sent,l=Object(a["f"])(u.common.artist,u.common.title,n),e.abrupt("return",{status:!0,title:l.title,artist:l.artist,ext:o,album:u.common.album,picture:Object(a["e"])(u),file:URL.createObjectURL(t),mime:a["a"][o]});case 15:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}}});